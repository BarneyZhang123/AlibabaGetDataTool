<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <input type="text">
    <button>搜索</button>
    <div class="box"></div>
    <button class="selectAll">爬取产品</button>
</body>
</html>

<script src="./jq.js"></script>
<script>
    document.querySelector('button').onclick = e => {
        // const value = document.querySelector('input').value
        // const box = document.querySelector('.box')
        // box.innerHTML = ''
        //
        // $.ajax({
        //     url: `https://connectkeyword.alibaba.com/lenoIframeJson.htm?iframe_delete=true&varname=intelSearchData&keyword=${value}&searchType=product_en&cateId=&cookieId=&buckettest=&version=2&locale=en_US`,
        //     type: 'get',
        //     dataType: 'jsonp',
        //     success: function (res) {
        //         console.log(res)
        //         if (res && res.length > 0) {
        //             res.map(e => {
        //                 const p = document.createElement('p')
        //                 p.innerHTML = e.keywords
        //                 box.append(p)
        //             })
        //         }
        //     }
        // })

        $.ajax({
            url: `http://127.0.0.1:5000/getProductCategories`,
            type: 'GET',
            dataType: 'json',
            data:{
                url:'https://geqian.en.alibaba.com'
            },
            success: function (res) {
                console.log(res)
            }
        })
    }
    document.querySelector('.selectAll').onclick = e => {
        $.ajax({
            url: `http://127.0.0.1:5000/getCommodityList`,
            type: 'GET',
            dataType: 'json',
            data:{
                url:'https://geqian.en.alibaba.com/productgrouplist-806625460/Smart_Camera.html'
            },
            success: function (res) {
                console.log(res)
            }
        })
    }

</script>
